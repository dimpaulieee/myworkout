<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>28Fit: Your Personal Performance Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="logo">28Fit</h1>
            <ul class="nav-menu">
                <li><a href="#bmi-section" class="nav-link">BMI Calculator</a></li>
                <li><a href="#goals-section" class="nav-link">Goals & FITT</a></li>
                <li><a href="#activity-section" class="nav-link">Activity Log</a></li>
                <li><a href="#food-section" class="nav-link">Food Log</a></li>
                <li><a href="#gallery-section" class="nav-link">Gallery</a></li>
            </ul>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- BMI Section -->
        <section id="bmi-section" class="section">
            <h2>1. Get Your BMI</h2>
            <div class="bmi-calculator">
                <div class="input-group">
                    <label for="height">Height (cm):</label>
                    <input type="number" id="height" placeholder="Enter height">
                </div>
                <div class="input-group">
                    <label for="weight">Weight (kg):</label>
                    <input type="number" id="weight" placeholder="Enter weight">
                </div>
                <button onclick="calculateBMI()" class="btn-primary">Calculate BMI</button>
                
                <div id="bmi-result" class="bmi-result" style="display: none;">
                    <h3>Your BMI: <span id="bmi-value"></span></h3>
                    <p>Category: <span id="bmi-category"></span></p>
                    <div class="bmi-meter">
                        <div class="meter-track">
                            <div class="meter-needle" id="bmi-needle"></div>
                        </div>
                        <div class="meter-labels">
                            <span>Underweight</span>
                            <span>Normal</span>
                            <span>Overweight</span>
                            <span>Obese</span>
                        </div>
                    </div>
                </div>

                <div class="evidence-upload">
                    <h4>Photo Evidence</h4>
                    <input type="file" id="bmi-photo" accept="image/*" capture="environment">
                    <div id="bmi-preview" class="image-preview"></div>
                </div>
            </div>
        </section>

        <!-- Goals & FITT Section -->
        <section id="goals-section" class="section">
            <h2>2. Your 28-Day SMART Goal & F.I.T.T Plan</h2>
            <div class="goals-form">
                <div class="smart-goal">
                    <h3>SMART Goal Builder</h3>
                    <div class="input-group">
                        <label for="specific">Specific Goal:</label>
                        <select id="specific" onchange="updateGoal()">
                            <option value="">Select your goal</option>
                            <option value="build muscle">Build Muscle</option>
                            <option value="lose fat">Lose Fat</option>
                            <option value="improve endurance">Improve Endurance</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="measurable">Measurable Target:</label>
                        <input type="text" id="measurable" placeholder="e.g., lift 50kg, run 5km">
                    </div>
                    <div class="input-group">
                        <label for="achievable">Days per Week:</label>
                        <select id="achievable">
                            <option value="3">3 days</option>
                            <option value="4">4 days</option>
                            <option value="5">5 days</option>
                            <option value="6">6 days</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="relevant">Why is this important?</label>
                        <textarea id="relevant" placeholder="Explain why this goal matters to you..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Time-bound: 28 days (Oct 20 - Nov 16)</label>
                    </div>
                </div>

                <div class="fitt-plan">
                    <h3>F.I.T.T. Principle</h3>
                    <div class="input-group">
                        <label for="frequency">Frequency:</label>
                        <input type="text" id="frequency" readonly>
                    </div>
                    <div class="input-group">
                        <label for="intensity">Intensity:</label>
                        <select id="intensity">
                            <option value="Light">Light</option>
                            <option value="Moderate">Moderate</option>
                            <option value="Vigorous">Vigorous</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="time">Time (minutes per session):</label>
                        <input type="number" id="time" placeholder="e.g., 45">
                    </div>
                    <div class="input-group">
                        <label for="type">Type of Exercise:</label>
                        <div id="exercise-types" class="checkbox-group"></div>
                    </div>
                </div>
                <button onclick="saveGoals()" class="btn-primary">Save Goals & FITT Plan</button>
            </div>
        </section>

        <!-- Activity Log Section -->
        <section id="activity-section" class="section">
            <h2>3. Activity Sheet</h2>
            <div class="week-selector">
                <button onclick="changeWeek(-1)" class="btn-secondary">← Previous Week</button>
                <h3 id="current-week">Week 1: Oct 20-26</h3>
                <button onclick="changeWeek(1)" class="btn-secondary">Next Week →</button>
            </div>
            <div class="activity-grid" id="activity-grid">
                <!-- Activity grid will be generated by JavaScript -->
            </div>
        </section>

        <!-- Food Log Section -->
        <section id="food-section" class="section">
            <h2>4. Personal Food Log</h2>
            <div class="food-date-selector">
                <label for="food-date">Date:</label>
                <input type="date" id="food-date" onchange="loadFoodLog()">
            </div>
            
            <div class="macronutrient-tracker">
                <h4>Daily Macronutrients</h4>
                <div class="macro-bars">
                    <div class="macro-bar">
                        <label>Protein: <span id="protein-current">0</span>/<span id="protein-target">140</span>g</label>
                        <div class="progress-bar"><div class="progress-fill" id="protein-bar"></div></div>
                    </div>
                    <div class="macro-bar">
                        <label>Calories: <span id="calories-current">0</span>/<span id="calories-target">2000</span></label>
                        <div class="progress-bar"><div class="progress-fill" id="calories-bar"></div></div>
                    </div>
                </div>
            </div>

            <div class="meal-sections">
                <div class="meal-section" data-meal="breakfast">
                    <h4>Breakfast</h4>
                    <div class="meal-entries"></div>
                    <button class="btn-secondary add-food-btn" onclick="openFoodModal('breakfast')">Add Food</button>
                </div>
                <div class="meal-section" data-meal="lunch">
                    <h4>Lunch</h4>
                    <div class="meal-entries"></div>
                    <button class="btn-secondary add-food-btn" onclick="openFoodModal('lunch')">Add Food</button>
                </div>
                <div class="meal-section" data-meal="miryenda">
                    <h4>Miryenda (Snacks)</h4>
                    <div class="meal-entries"></div>
                    <button class="btn-secondary add-food-btn" onclick="openFoodModal('miryenda')">Add Food</button>
                </div>
                <div class="meal-section" data-meal="dinner">
                    <h4>Dinner</h4>
                    <div class="meal-entries"></div>
                    <button class="btn-secondary add-food-btn" onclick="openFoodModal('dinner')">Add Food</button>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery-section" class="section">
            <h2>5. Photo Evidence Gallery</h2>
            <div class="gallery-filters">
                <select id="gallery-filter" onchange="filterGallery()">
                    <option value="all">All Evidence</option>
                    <option value="bmi">BMI Evidence</option>
                    <option value="workout">Workout Evidence</option>
                    <option value="food">Food Log Evidence</option>
                </select>
                <select id="week-filter" onchange="filterGallery()">
                    <option value="all">All Weeks</option>
                    <option value="1">Week 1</option>
                    <option value="2">Week 2</option>
                    <option value="3">Week 3</option>
                    <option value="4">Week 4</option>
                </select>
            </div>
            <div class="gallery-grid" id="gallery-grid">
                <!-- Gallery items will be populated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- AI FitCoach Chat -->
    <div class="fitcoach-chat">
        <div class="chat-toggle" onclick="toggleChat()">
            <i class="fas fa-robot"></i>
        </div>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h4>FitCoach AI</h4>
                <button onclick="toggleChat()" class="close-chat"><i class="fas fa-times"></i></button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot-message">
                    Hi! I'm your FitCoach. How can I help you today?
                </div>
            </div>
            <div class="quick-actions">
                <button onclick="askSuggestion('food')" class="quick-btn">🍽️ Food Suggestion</button>
                <button onclick="askSuggestion('workout')" class="quick-btn">💪 Workout Suggestion</button>
                <button onclick="askSuggestion('protein')" class="quick-btn">🥛 Protein Check</button>
            </div>
        </div>
    </div>

    <!-- Food Modal -->
    <div id="foodModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeFoodModal()">&times;</span>
            <h3>Add Food Entry</h3>
            <form id="foodForm">
                <input type="hidden" id="currentMeal">
                <div class="input-group">
                    <label for="foodName">Food Item:</label>
                    <input type="text" id="foodName" required>
                </div>
                <div class="input-group">
                    <label for="foodQuantity">Quantity:</label>
                    <input type="text" id="foodQuantity" placeholder="e.g., 1 cup, 200g" required>
                </div>
                <div class="input-group">
                    <label for="foodProtein">Protein (g):</label>
                    <input type="number" id="foodProtein" step="0.1" required>
                </div>
                <div class="input-group">
                    <label for="foodCarbs">Carbs (g):</label>
                    <input type="number" id="foodCarbs" step="0.1" required>
                </div>
                <div class="input-group">
                    <label for="foodFat">Fat (g):</label>
                    <input type="number" id="foodFat" step="0.1" required>
                </div>
                <div class="input-group">
                    <label for="foodCalories">Calories:</label>
                    <input type="number" id="foodCalories" required>
                </div>
                <div class="input-group">
                    <label for="foodPhoto">Photo Evidence:</label>
                    <input type="file" id="foodPhoto" accept="image/*">
                </div>
                <button type="submit" class="btn-primary">Add to Log</button>
            </form>
        </div>
    </div>

    <!-- Activity Modal -->
    <div id="activityModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeActivityModal()">&times;</span>
            <h3>Log Activity</h3>
            <form id="activityForm">
                <input type="hidden" id="activityTimeSlot">
                <div class="input-group">
                    <label for="activityType">Activity Type:</label>
                    <select id="activityType" required>
                        <option value="">Select activity</option>
                        <option value="sleeping">Sleeping</option>
                        <option value="eating">Eating</option>
                        <option value="commuting">Commuting</option>
                        <option value="school">School</option>
                        <option value="strength">Strength Training</option>
                        <option value="cardio">Cardio</option>
                        <option value="sports">Sports</option>
                        <option value="study">Study</option>
                        <option value="leisure">Leisure</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="activityDetails">Specifics:</label>
                    <textarea id="activityDetails" placeholder="e.g., 30-minute jog, Weightlifting: Chest & Triceps"></textarea>
                </div>
                <div class="input-group">
                    <label for="activityEnergy">Energy Level (1-5):</label>
                    <div class="star-rating">
                        <span class="star" onclick="setEnergy(1)">★</span>
                        <span class="star" onclick="setEnergy(2)">★</span>
                        <span class="star" onclick="setEnergy(3)">★</span>
                        <span class="star" onclick="setEnergy(4)">★</span>
                        <span class="star" onclick="setEnergy(5)">★</span>
                    </div>
                    <input type="hidden" id="activityEnergy" value="3">
                </div>
                <div class="input-group">
                    <label for="activityPhoto">Photo Evidence:</label>
                    <input type="file" id="activityPhoto" accept="image/*">
                </div>
                <button type="submit" class="btn-primary">Save Activity</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>